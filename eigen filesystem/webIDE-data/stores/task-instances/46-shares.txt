20170220-104457["Bin",1,["TaskId",46,3101],"implementation module createAndRunExec\r\n\r\nimport iTasks\r\nimport Text, Text.HTML\r\n\r\ncreateExec :: String String String   -> Task ()\r\ncreateExec cpmBin buildDir mainModule\r\n\t\t= build @! ()\r\nwhere\r\n\tbuild \t\t\t\t\t\t\t\t\r\n\t\t=\t\tcreateCleanProject \r\n\t\t>>|\t\tbuildCleanProject  \r\n\r\n\tcreateCleanProject   \r\n\t\t= \tcallProcess \"Create project\" [] cpmBin [\"project\",mainModule,\"create\"] (Just buildDir)\r\n\t\t>>| setProjectOptions  \t\t\r\n\twhere\r\n\t\tsetProjectOptions \r\n\t\t\t=  \t\t\t\timportTextFile projectFile\r\n\t\t\t>>- \\content -> exportTextFile projectFile (setOptions content)\r\n\r\n\t\tprojectFile = buildDir <\/> mainModule +++ \".prj\"\r\n\r\n\t\tsetOptions s = ( replaceSubString \"HeapSize:\\t2097152\" \"HeapSize:\\t20971520\"\r\n\t\t\/\/\t\t\t   o replaceSubString \"Target:\\tStdEnv\" \"Target:\\tiTasks\"\r\n\t\t\/*\t\t\t   o replaceSubString \"Stack:\\tFalse\" \"Stack:\\tTrue\"*\/) s\r\n\r\n\tbuildCleanProject   \r\n\t\t= callProcess \"Building project\" [] cpmBin [mainModule +++ \".prj\"] (Just buildDir)\r\n\r\n\/\/ run an executable and view its output in the browser\r\n\r\nrunExec :: String Int   -> Task ()\r\nrunExec execPath portNumber  \t\t\t\t\t\t\r\n\t=\t\tcallProcess \"Executing\" [ViewAs toView] execPath [\"-port\",toString portNumber] (Just (takeDirectory execPath)) @! ()\r\nwhere\r\n\ttoView _ = ATag [HrefAttr (\"http:\/\/localhost:\" +++ toString portNumber +++ \"\/\"),TargetAttr \"_blank\"] \r\n\t\t\t\t\t[Text (\"View the code at: http:\/\/localhost:\" +++ toString portNumber)]\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\r\n",["Tip"],["Tip"]]